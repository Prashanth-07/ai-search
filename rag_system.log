2025-02-16 17:48:41,343 [INFO] Starting RAG Tool Recommendation API server
2025-02-16 17:49:24,929 [INFO] Received request 20250216_174924_929756
2025-02-16 17:49:24,931 [INFO] Query: I need an image generation tool
2025-02-16 17:49:24,931 [INFO] Number of tools provided: 0
2025-02-16 17:49:24,932 [INFO] Starting RAG system for request 20250216_174924_932754
2025-02-16 17:49:24,933 [INFO] Query: I need an image generation tool
2025-02-16 17:49:24,934 [INFO] Step 1/3: Initializing vector store
2025-02-16 17:49:24,935 [INFO] Getting vector store (tool_data provided: no)
2025-02-16 17:49:24,936 [ERROR] No vector store available and no tool_data provided
2025-02-16 17:49:24,939 [ERROR] Error processing request 20250216_174924_932754: No vector store available. Provide tool_data at least once.
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 226, in run_rag_system
    vector_store = get_vector_store(tool_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 213, in get_vector_store
    raise ValueError("No vector store available. Provide tool_data at least once.")
ValueError: No vector store available. Provide tool_data at least once.
2025-02-16 17:49:24,943 [ERROR] Internal error for request 20250216_174924_929756: 500: Error processing query: No vector store available. Provide tool_data at least once.
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 226, in run_rag_system
    vector_store = get_vector_store(tool_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 213, in get_vector_store
    raise ValueError("No vector store available. Provide tool_data at least once.")
ValueError: No vector store available. Provide tool_data at least once.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 260, in recommend_tools
    response = run_rag_system(
               ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 240, in run_rag_system
    raise HTTPException(status_code=500, detail=f"Error processing query: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing query: No vector store available. Provide tool_data at least once.
2025-02-16 17:49:58,409 [INFO] Received request 20250216_174958_409983
2025-02-16 17:49:58,410 [INFO] Query: I need an image generation tool
2025-02-16 17:49:58,411 [INFO] Number of tools provided: 15
2025-02-16 17:49:58,413 [INFO] Starting RAG system for request 20250216_174958_413013
2025-02-16 17:49:58,413 [INFO] Query: I need an image generation tool
2025-02-16 17:49:58,415 [INFO] Step 1/3: Initializing vector store
2025-02-16 17:49:58,415 [INFO] Getting vector store (tool_data provided: yes)
2025-02-16 17:49:58,416 [INFO] Creating new vector store with 15 tools
2025-02-16 17:49:58,417 [INFO] Converting 15 tools to documents
2025-02-16 17:49:58,419 [INFO] Setting up vector store with 15 documents
2025-02-16 17:50:00,190 [INFO] Initialized CustomOllamaEmbeddings with base_url: http://91.150.160.38:1365/api
2025-02-16 17:50:04,750 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-16 17:50:05,539 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-16 17:50:05,550 [INFO] Vector store setup completed in 7.13 seconds
2025-02-16 17:50:05,552 [INFO] Step 2/3: Creating retriever
2025-02-16 17:50:05,553 [INFO] Step 3/3: Creating and running RAG chain
2025-02-16 17:50:05,554 [INFO] Creating RAG chain
2025-02-16 17:50:07,379 [INFO] Initialized CustomChatOllama with base_url: http://91.150.160.38:1365/api
2025-02-16 17:50:07,382 [INFO] RAG chain created successfully
2025-02-16 17:50:07,464 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-16 17:50:22,982 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
2025-02-16 17:51:48,002 [INFO] Request 20250216_174958_413013 completed in 109.59 seconds
2025-02-16 17:51:48,005 [INFO] Request 20250216_174958_409983 completed successfully in 109.60 seconds
2025-02-16 17:52:58,639 [INFO] Received request 20250216_175258_639346
2025-02-16 17:52:58,640 [INFO] Query: I need an coding tool
2025-02-16 17:52:58,641 [INFO] Number of tools provided: 0
2025-02-16 17:52:58,642 [INFO] Starting RAG system for request 20250216_175258_642284
2025-02-16 17:52:58,643 [INFO] Query: I need an coding tool
2025-02-16 17:52:58,644 [INFO] Step 1/3: Initializing vector store
2025-02-16 17:52:58,645 [INFO] Getting vector store (tool_data provided: no)
2025-02-16 17:52:58,646 [INFO] Step 2/3: Creating retriever
2025-02-16 17:52:58,647 [INFO] Step 3/3: Creating and running RAG chain
2025-02-16 17:52:58,648 [INFO] Creating RAG chain
2025-02-16 17:53:00,473 [INFO] Initialized CustomChatOllama with base_url: http://91.150.160.38:1365/api
2025-02-16 17:53:00,475 [INFO] RAG chain created successfully
2025-02-16 17:53:05,162 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-16 17:53:18,303 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
2025-02-16 17:54:54,212 [INFO] Request 20250216_175258_642284 completed in 115.57 seconds
2025-02-16 17:54:54,215 [INFO] Request 20250216_175258_639346 completed successfully in 115.58 seconds
2025-02-18 14:16:50,121 [INFO] Starting RAG Tool Recommendation API server
2025-02-18 14:17:36,735 [INFO] Received request 20250218_141736_735830
2025-02-18 14:17:36,736 [INFO] Query: I need an coding tool
2025-02-18 14:17:36,736 [INFO] Number of tools provided: 15
2025-02-18 14:17:36,736 [INFO] Starting RAG system for request 20250218_141736_736693
2025-02-18 14:17:36,736 [INFO] Query: I need an coding tool
2025-02-18 14:17:36,736 [INFO] Step 1/3: Initializing vector store
2025-02-18 14:17:36,737 [INFO] Getting vector store (tool_data provided: yes)
2025-02-18 14:17:36,737 [INFO] Creating new vector store with 15 tools
2025-02-18 14:17:36,737 [INFO] Converting 15 tools to documents
2025-02-18 14:17:36,738 [INFO] Setting up vector store with 15 documents
2025-02-18 14:17:37,246 [INFO] Initialized CustomOllamaEmbeddings with base_url: http://localhost:11434
2025-02-18 14:17:38,408 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-18 14:17:38,639 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-18 14:17:38,642 [INFO] Vector store setup completed in 1.90 seconds
2025-02-18 14:17:38,642 [INFO] Step 2/3: Creating retriever
2025-02-18 14:17:38,642 [INFO] Step 3/3: Creating and running RAG chain
2025-02-18 14:17:38,643 [INFO] Creating RAG chain
2025-02-18 14:17:39,119 [ERROR] Error creating RAG chain: "CustomChatOllama" object has no field "min_tokens"
2025-02-18 14:17:39,119 [ERROR] Error processing request 20250218_141736_736693: "CustomChatOllama" object has no field "min_tokens"
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 258, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 204, in create_rag_chain
    model = CustomChatOllama(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 85, in __init__
    self.min_tokens = kwargs.get("min_tokens", 0)
    ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\pydantic\main.py", line 925, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')
ValueError: "CustomChatOllama" object has no field "min_tokens"
2025-02-18 14:17:39,121 [ERROR] Internal error for request 20250218_141736_735830: 500: Error processing query: "CustomChatOllama" object has no field "min_tokens"
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 258, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 204, in create_rag_chain
    model = CustomChatOllama(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 85, in __init__
    self.min_tokens = kwargs.get("min_tokens", 0)
    ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\pydantic\main.py", line 925, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')
ValueError: "CustomChatOllama" object has no field "min_tokens"

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 286, in recommend_tools
    response = run_rag_system(
               ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 266, in run_rag_system
    raise HTTPException(status_code=500, detail=f"Error processing query: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing query: "CustomChatOllama" object has no field "min_tokens"
2025-02-18 14:34:44,070 [INFO] Starting RAG Tool Recommendation API server
2025-02-18 14:34:56,875 [INFO] Received request 20250218_143456_875643
2025-02-18 14:34:56,875 [INFO] Query: I need an coding tool
2025-02-18 14:34:56,875 [INFO] Number of tools provided: 15
2025-02-18 14:34:56,876 [INFO] Starting RAG system for request 20250218_143456_876885
2025-02-18 14:34:56,876 [INFO] Query: I need an coding tool
2025-02-18 14:34:56,876 [INFO] Step 1/3: Initializing vector store
2025-02-18 14:34:56,876 [INFO] Getting vector store (tool_data provided: yes)
2025-02-18 14:34:56,876 [INFO] Creating new vector store with 15 tools
2025-02-18 14:34:56,876 [INFO] Converting 15 tools to documents
2025-02-18 14:34:56,876 [INFO] Setting up vector store with 15 documents
2025-02-18 14:34:57,342 [INFO] Initialized CustomOllamaEmbeddings with base_url: http://localhost:11434
2025-02-18 14:34:58,071 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-18 14:34:58,291 [INFO] HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-02-18 14:34:58,292 [INFO] Vector store setup completed in 1.42 seconds
2025-02-18 14:34:58,292 [INFO] Step 2/3: Creating retriever
2025-02-18 14:34:58,292 [INFO] Step 3/3: Creating and running RAG chain
2025-02-18 14:34:58,292 [INFO] Creating RAG chain
2025-02-18 14:34:58,752 [ERROR] Error creating RAG chain: "CustomChatOllama" object has no field "min_tokens"
2025-02-18 14:34:58,752 [ERROR] Error processing request 20250218_143456_876885: "CustomChatOllama" object has no field "min_tokens"
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 258, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 204, in create_rag_chain
    model = CustomChatOllama(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 85, in __init__
    self.min_tokens = kwargs.get("min_tokens", 0)
    ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\pydantic\main.py", line 925, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')
ValueError: "CustomChatOllama" object has no field "min_tokens"
2025-02-18 14:34:58,754 [ERROR] Internal error for request 20250218_143456_875643: 500: Error processing query: "CustomChatOllama" object has no field "min_tokens"
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 258, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 204, in create_rag_chain
    model = CustomChatOllama(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 85, in __init__
    self.min_tokens = kwargs.get("min_tokens", 0)
    ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\pydantic\main.py", line 925, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')
ValueError: "CustomChatOllama" object has no field "min_tokens"

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 286, in recommend_tools
    response = run_rag_system(
               ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 266, in run_rag_system
    raise HTTPException(status_code=500, detail=f"Error processing query: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing query: "CustomChatOllama" object has no field "min_tokens"
2025-02-18 14:42:17,128 [INFO] Received request 20250218_144217_128566
2025-02-18 14:42:17,130 [INFO] Query: I need an coding tool
2025-02-18 14:42:17,130 [INFO] Number of tools provided: 15
2025-02-18 14:42:17,130 [INFO] Starting RAG system for request 20250218_144217_130074
2025-02-18 14:42:17,131 [INFO] Query: I need an coding tool
2025-02-18 14:42:17,131 [INFO] Step 1/3: Initializing vector store
2025-02-18 14:42:17,131 [INFO] Getting vector store (tool_data provided: yes)
2025-02-18 14:42:17,131 [INFO] Creating new vector store with 15 tools
2025-02-18 14:42:17,131 [INFO] Converting 15 tools to documents
2025-02-18 14:42:17,131 [INFO] Setting up vector store with 15 documents
2025-02-18 14:42:17,735 [INFO] Initialized CustomOllamaEmbeddings with base_url: http://localhost:11434
2025-02-18 14:42:19,927 [INFO] Vector store setup completed in 2.80 seconds
2025-02-18 14:42:19,927 [INFO] Step 2/3: Creating retriever
2025-02-18 14:42:19,927 [INFO] Step 3/3: Creating and running RAG chain
2025-02-18 14:42:19,927 [INFO] Creating RAG chain
2025-02-18 14:42:19,927 [ERROR] Error creating RAG chain: "CustomChatOllama" object has no field "custom_params"
2025-02-18 14:42:19,927 [ERROR] Error processing request 20250218_144217_130074: "CustomChatOllama" object has no field "custom_params"
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 230, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 176, in create_rag_chain
    model = CustomChatOllama(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 92, in __init__
    self.custom_params = {key: kwargs.pop(key) for key in custom_keys if key in kwargs}
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\pydantic\main.py", line 925, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')
ValueError: "CustomChatOllama" object has no field "custom_params"
2025-02-18 14:42:19,927 [ERROR] Internal error for request 20250218_144217_128566: 500: Error processing query: "CustomChatOllama" object has no field "custom_params"
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 230, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 176, in create_rag_chain
    model = CustomChatOllama(
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 92, in __init__
    self.custom_params = {key: kwargs.pop(key) for key in custom_keys if key in kwargs}
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\pydantic\main.py", line 925, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')
ValueError: "CustomChatOllama" object has no field "custom_params"

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 258, in recommend_tools
    response = run_rag_system(
               ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 238, in run_rag_system
    raise HTTPException(status_code=500, detail=f"Error processing query: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing query: "CustomChatOllama" object has no field "custom_params"
2025-02-18 15:03:57,916 [INFO] Received request 20250218_150357_916353
2025-02-18 15:03:57,919 [INFO] Query: I need an coding tool
2025-02-18 15:03:57,919 [INFO] Number of tools provided: 15
2025-02-18 15:03:57,919 [INFO] Starting RAG system for request 20250218_150357_919137
2025-02-18 15:03:57,919 [INFO] Query: I need an coding tool
2025-02-18 15:03:57,919 [INFO] Step 1/3: Initializing vector store
2025-02-18 15:03:57,919 [INFO] Getting vector store (tool_data provided: yes)
2025-02-18 15:03:57,919 [INFO] Creating new vector store with 15 tools
2025-02-18 15:03:57,919 [INFO] Converting 15 tools to documents
2025-02-18 15:03:57,919 [INFO] Setting up vector store with 15 documents
2025-02-18 15:03:58,492 [INFO] Initialized CustomOllamaEmbeddings with base_url: http://localhost:11434
2025-02-18 15:03:59,844 [INFO] Vector store setup completed in 1.93 seconds
2025-02-18 15:03:59,844 [INFO] Step 2/3: Creating retriever
2025-02-18 15:03:59,844 [INFO] Step 3/3: Creating and running RAG chain
2025-02-18 15:03:59,844 [INFO] Creating RAG chain
2025-02-18 15:03:59,848 [INFO] Initialized CustomChatModel with model: deepseek-r1:1.5b
2025-02-18 15:03:59,848 [ERROR] Error creating RAG chain: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'rag.CustomChatModel'>
2025-02-18 15:03:59,848 [ERROR] Error processing request 20250218_150357_919137: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'rag.CustomChatModel'>
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 285, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 244, in create_rag_chain
    {"context": retriever | format_docs, "question": RunnablePassthrough()}
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\langchain_core\runnables\base.py", line 2964, in __or__
    coerce_to_runnable(other),
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\langchain_core\runnables\base.py", line 5848, in coerce_to_runnable
    raise TypeError(msg)
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'rag.CustomChatModel'>
2025-02-18 15:03:59,848 [ERROR] Internal error for request 20250218_150357_916353: 500: Error processing query: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'rag.CustomChatModel'>
Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 285, in run_rag_system
    rag_chain = create_rag_chain(retriever)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 244, in create_rag_chain
    {"context": retriever | format_docs, "question": RunnablePassthrough()}
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\langchain_core\runnables\base.py", line 2964, in __or__
    coerce_to_runnable(other),
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\env\Lib\site-packages\langchain_core\runnables\base.py", line 5848, in coerce_to_runnable
    raise TypeError(msg)
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'rag.CustomChatModel'>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 313, in recommend_tools
    response = run_rag_system(
               ^^^^^^^^^^^^^^^
  File "C:\Users\prash\OneDrive\Desktop\rag\rag.py", line 293, in run_rag_system
    raise HTTPException(status_code=500, detail=f"Error processing query: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing query: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'rag.CustomChatModel'>
